!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Selo=t():e.Selo=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var o=n(1),i=n(2);!function(){function t(e){if(!e.els){var t=void 0==e.log||e.log;t&&console.log("[El parameters] is not defined, this element set as body  ")}if(!document)throw"[Platfrom] not supported";this._arena=null,this.selection=null,this.els=e.els||document.body,this.init()}i.start(),t.prototype.init=function(){this._arena=this.els,this.selection=window.getSelection(),this.attachEvent()},t.prototype.attachEvent=function(){var e=null,t=new CustomEvent("selectionEnd"),n=new CustomEvent("selectionStart",{detail:this.selection}),o=new CustomEvent("selectionBeforeStart"),i={65:!1,91:!1,37:!1,38:!1,39:!1,40:!1,16:!1};["mouseup","selectionchange","keyup","keydown"].map(function(s){document.addEventListener(s.toString(),function(s){"selectionchange"!=s.type&&"mouseup"!=s.type&&("keydown"==s.type?i[s.keyCode]=!0:i[65]&&i[91]?this.hasText()&&document.dispatchEvent(t):(i[16]&&i[37]||i[16]&&i[38]||i[16]&&i[39]||i[16]&&i[40])&&this.hasText()&&document.dispatchEvent(t)),"selectionchange"==s.type&&("Range"==this.selection.type?this.hasText()&&document.dispatchEvent(n):this.inArena()&&document.dispatchEvent(o),clearTimeout(e)),e=setTimeout(function(){"mouseup"==s.type&&this.hasText()&&document.dispatchEvent(t)}.bind(this),100)}.bind(this))}.bind(this))},t.prototype.hasText=function(){return!!this.inArena()&&""!=this.selection.toString()},t.prototype.inArena=function(){var e=document.querySelectorAll(this._arena);if(this.selection.focusNode){var t=o(this.selection.focusNode.parentNode),n=!1;return Object.keys(e).map(function(o){t.indexOf(e[o])!=-1&&(n=!0)}),n}return!1},t.prototype.getPositionRange=function(){var e=this.selection.getRangeAt(0),t=e.getBoundingClientRect(),n={};return n.left=t.left,n.top=t.top,n.getBoundingClientRect=t,n},t.prototype.saveSelection=function(){if(window.getSelection){var e=window.getSelection();if(e.getRangeAt&&e.rangeCount)return e.getRangeAt(0)}else if(document.selection&&document.selection.createRange)return document.selection.createRange();return null},t.prototype.restoreSelection=function(e){if(e)if(window.getSelection){var t=window.getSelection();t.removeAllRanges(),t.addRange(e)}else document.selection&&e.select&&e.select()},e.exports=t}()},function(e,t){e.exports=function(e){for(var t=e,n=[];t;)n.unshift(t),t=t.parentNode;return n}},function(e,t,n){var o=function(e){function t(t){var n=t.onselectionchange;if(n!==e)try{return t.onselectionchange=0,null===t.onselectionchange}catch(o){}finally{t.onselectionchange=n}return!1}function n(){return"undefined"!=typeof WeakMap?new WeakMap:(console.error("selectionchange: WeakMap not supported"),null)}function o(e){var t=e.getSelection();return t.rangeCount?t.getRangeAt(0):null}function i(e,t,n){e.addEventListener(t,n,!0)}function s(e,t,n){e.removeEventListener(t,n,!0)}function u(e){w[e.target.tagName]||f(this,!0)}function c(e){var t=e.keyCode;(65===t&&e[v]&&!e.shiftKey&&!e.altKey||t>=35&&t<=40||e.ctrlKey&&m&&g.indexOf(t)>=0)&&(w[e.target.tagName]||setTimeout(f.bind(null,this),0))}function r(e){0===e.button&&(i(this,"mousemove",a),setTimeout(f.bind(null,this),0))}function a(e){1&e.buttons?f(this):s(this,"mousemove",a)}function l(e){0===e.button?setTimeout(f.bind(null,this),0):s(this,"mousemove",a)}function d(){setTimeout(f.bind(null,this.document),0)}function f(e,t){var n=o(e);!t&&p(n,h.get(e))||(h.set(e,n),setTimeout(e.dispatchEvent.bind(e,new Event("selectionchange")),0))}function p(e,t){return e===t||e&&t&&y.every(function(n){return e[n]===t[n]})}var h,m=/^Mac/.test(navigator.platform),g=[65,66,69,70,78,80],v=m?"metaKey":"ctrlKey",y=["startContainer","startOffset","endContainer","endOffset"],w={INPUT:1,TEXTAREA:1};return{start:function(e){var s=e||document;(h||!t(s)&&(h=n()))&&(h.has(s)||(h.set(s,o(s)),i(s,"input",u),i(s,"keydown",c),i(s,"mousedown",r),i(s,"mousemove",a),i(s,"mouseup",l),i(s.defaultView,"focus",d)))},stop:function(e){var t=e||document;h&&h.has(t)&&(h["delete"](t),s(t,"input",u),s(t,"keydown",c),s(t,"mousedown",r),s(t,"mousemove",a),s(t,"mouseup",l),s(t.defaultView,"focus",d))}}}();e.exports=o}])});